<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>九州×宮城 飲み会スロット</title>
<style>
  body {
    font-family: sans-serif;
    text-align: center;
    background-color: #f7f7f7;
  }
  h1 {
    font-size: 1.5em;
    margin-top: 20px;
  }
  .slot-container {
    position: relative;
    margin: 20px auto;
    width: 90%;
    max-width: 400px;
    height: 200px;
    overflow: hidden;
    border: 5px solid #333;
    border-radius: 10px;
    background: white;
  }
  .slot {
    position: absolute;
    width: 100%;
    animation-timing-function: linear;
  }
  .slot-item {
    font-size: 1.2em;
    padding: 15px 0;
    border-bottom: 1px solid #ddd;
  }
  .center-line {
    position: absolute;
    top: 50%;
    width: 100%;
    height: 40px;
    margin-top: -20px;
    border-top: 3px solid red;
    border-bottom: 3px solid red;
    pointer-events: none;
  }
  button {
    font-size: 1.2em;
    padding: 10px 20px;
    margin: 10px;
    border: none;
    border-radius: 5px;
    background-color: #007bff;
    color: white;
  }
  button:disabled {
    background-color: #aaa;
  }
</style>
</head>
<body>

<h1>九州×宮城 飲み会スロット</h1>

<div class="slot-container">
  <div id="slot" class="slot"></div>
  <div class="center-line"></div>
</div>

<div>
  <button id="startBtn">スタート</button>
  <button id="stopBtn" disabled>ストップ</button>
</div>

<audio id="drumSound" src="drum.mp3"></audio>
<audio id="fanfareSound" src="fanfare.mp3"></audio>

<script>
const questions = [
  "出身地は九州のどこ？",
  "九州のソウルフードといえば？",
  "宮城に来て驚いたことは？",
  "宮城で好きな食べ物は？",
  "宮城に来てから行った観光地は？",
  "九州の方言を一言！",
  "宮城の方言で知ってるものは？",
  "宮城でおすすめの居酒屋は？",
  "宮城の冬をどう乗り切ってる？",
  "宮城に来て初めて食べたものは？",
  "九州のおすすめ観光スポットは？",
  "宮城に九州料理を持ってくるなら何？",
  "宮城の好きな祭りやイベントは？",
  "九州の好きな祭りやイベントは？",
  "宮城に来て感じた人の印象は？",
  "九州と宮城でどっちが酒が強い？",
  "宮城で行きたい場所は？",
  "宮城に住んでよかったことは？",
  "宮城でまだ食べてないけど食べたいものは？",
  "宮城で九州出身同士でやりたいことは？"
];

const slot = document.getElementById('slot');
const startBtn = document.getElementById('startBtn');
const stopBtn = document.getElementById('stopBtn');
const drumSound = document.getElementById('drumSound');
const fanfareSound = document.getElementById('fanfareSound');

let spinning = false;
let position = 0;
let speed = 20;
let animationId;

function renderSlot() {
  slot.innerHTML = "";
  const list = [...questions, ...questions, ...questions];
  list.forEach(q => {
    const div = document.createElement('div');
    div.className = 'slot-item';
    div.textContent = q;
    slot.appendChild(div);
  });
}

function animate() {
  position += speed;
  if (position >= slot.scrollHeight / 3) position = 0;
  slot.style.top = -position + 'px';
  if (spinning) {
    animationId = requestAnimationFrame(animate);
  }
}

startBtn.addEventListener('click', () => {
  spinning = true;
  speed = 20;
  drumSound.currentTime = 0;
  drumSound.play();
  startBtn.disabled = true;
  stopBtn.disabled = false;
  animate();
});

stopBtn.addEventListener('click', () => {
  spinning = false;
  stopBtn.disabled = true;
  drumSound.pause();

  // 徐々に減速
  const decelerate = setInterval(() => {
    if (speed > 1) {
      speed -= 1;
      animate();
    } else {
      clearInterval(decelerate);
      fanfareSound.currentTime = 0;
      fanfareSound.play();
      startBtn.disabled = false;
    }
  }, 100);
});

renderSlot();
</script>

</body>
</html>
